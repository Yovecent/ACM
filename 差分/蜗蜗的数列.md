# [èœ—èœ—çš„æ•°åˆ—](http://oj.daimayuan.top/course/10/problem/562)

    çœŸçš„å¥½éš¾ï¼Œå®Œå…¨æ²¡æœ‰æƒ³åˆ°ã€‚
    æœ¬æ¥ä»¥ä¸ºæ˜¯Hashä½†æ˜¯å‘ç°ä¸ä¼šåšã€‚
    
 
    é¦–å…ˆæˆ‘ä»¬å› ä¸ºæ˜¯è¦åˆ¤æ–­Aå’ŒBæ˜¯å¦ç›¸ç­‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å®šä¹‰ C[i] = A[i] - B[i]ï¼Œ
    é‚£ä¹ˆæˆ‘ä»¬è®© A å¢åŠ æ—¶å°±æ˜¯è®© C å¢åŠ ï¼Œè®© B å¢åŠ æ—¶å°±æ˜¯è®© C å‡å°ã€‚
    è€ŒA, B ç›¸ç­‰å³ä¸ºCå…¨ä¸º0.
    
    
    è¿™é‡Œå› ä¸ºæ˜¯è®©[l,r]åŒºé—´æ•´ä½“åŠ ä¸ŠFiboæ•°åˆ—ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç±»æ¯”å·®åˆ†çš„æ€æƒ³ã€‚
    åˆ©ç”¨ F[i] = F[i - 1] + F[i - 2],
    æˆ‘ä»¬å®šä¹‰ D[i] = C[i] - C[i - 1] - C[i - 2]( i >= 3)ã€‚
     D[1] = C[1], D[2] = C[2] - C[1]
    æˆ‘ä»¬è®¾æƒ³ä¸€ä¸‹å¯¹äºåŒºé—´[l,r]å˜åŒ–çš„è¯ï¼Œå¦‚æœæ˜¯è®©Aå¢åŠ ã€‚
    é‚£ä¹ˆD[l] += 1,   D[r + 1] - = fibo[r - l + 2], D[r + 2] -= fibo[r - l + 1]ã€‚
    è€Œè¿™åŒºé—´å†…æ˜¯ä¸å˜çš„ã€‚
    æ‰€ä»¥æˆ‘ä»¬çš„åˆ¤æ–­Cæ˜¯å¦å…¨ä¸º0çš„ä¾æ®å°±å˜ä¸ºäº†Dæ˜¯å¦å…¨ä¸º0ã€‚

```C++
#include  <bits/stdc++.h>

#define endl '\n'
#define MD(x)  ((((x)% mod) + mod) % mod) 
using namespace std;
using i64 = long long;

vector<i64>fibo(1000010),c(1000010),D(1000010);
vector<bool>vis(1000010);
int cnt;

void ok(int l){

    if(vis[l] && D[l]){
        cnt--;vis[l] = false;
    } else if( !vis[l] && !D[l]){
        cnt++;vis[l] = true;
    }
}

int main()
{
#ifndef ONLINE_JUDGE
freopen("in.txt","r",stdin);
freopen("out.txt","w",stdout);
#endif
    ios::sync_with_stdio(false);cin.tie(nullptr);

    int n, q, mod;
    cin >> n >> q >> mod;

    fibo[1] = fibo[2] = 1;
    for(int i = 3; i <= n ; i++) fibo[i] = (fibo[i - 1] + fibo[i - 2]) % mod;

    for(int i = 1; i <= n; i++) cin >> c[i];
    for(int i = 1; i <= n; i++){
        i64 x; cin >> x;
        c[i] = ((c[i] - x) % mod + mod) % mod;
    }

    D[1] = c[1],D[2] = ((c[2] - c[1]) % mod + mod) % mod;
    for(int i = 3; i <= n ; i++){
        D[i] = ((c[i] - c[i - 1] - c[i - 2]) % mod + mod) % mod;
    }

    for(int i = 1; i <= n ; i++){
        if(D[i] == 0){
            vis[i] = true;
            cnt++;
        }
    }

    while(q--){
        char x;  cin >> x;
        int  l, r;  cin >> l >> r;
        i64 k = 1;
        if(x == 'B') k = -1;
        D[l] = MD(D[l] + k * fibo[1]);
        ok(l);
        if(r + 1 <= n) {
            D[r + 1] = MD(D[r + 1] - k * fibo[r - l + 2]);
            ok(r + 1);
        }
        if(r + 2 <= n ){
            D[r + 2] = MD(D[r + 2] - k * fibo[r - l + 1]);
            ok(r + 2);
        }
        if(cnt == n){
            cout << "Yes" << endl;
        } else {
            cout << "No" << endl;
        }
    }

    return 0;

} 
```

```diff
!   ğŸ—ƒï¸2022-03-20
```
