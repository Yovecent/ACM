# ğŸ’«[#466. æ‘˜æ¡ƒå­](http://oj.daimayuan.top/problem/466)

    æ˜¯ä¸€é“å…¸å‹çš„å‰ç¼€å’Œé—®é¢˜ã€‚
    è€ƒå¯Ÿäº† å‰ç¼€å’Œ + å°ºå–
    
    è®¾åŒºé—´[l,r]æ»¡è¶³æ¡ä»¶ï¼Œé‚£ä¹ˆå¯ä»¥åˆ—å‡ºä»¥ä¸‹çš„å¼å­ï¼š
    
    (sum[r] - sum[l - 1]) % k == r - l + 1
    æ•´ç†å¯å¾—ï¼š
    (sum[r] - r) % k == (sum[l - 1] - (l - 1)) % k   {å³æ»¡è¶³æ¡ä»¶çš„å·¦å³ç«¯ç‚¹çš„ï¼ˆsum[i] - iï¼‰ % kæ˜¯ç›¸ç­‰çš„}
    
    é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å¾—å‡ºç»“è®ºï¼šæˆ‘ä»¬æ¯é€‰å®šä¸€ä¸ªå³ç«¯ç‚¹ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç®—å‡ºå½“å‰çš„ (sum[r] - r) % kï¼Œ
    ç„¶åå»æŸ¥æˆ‘ä»¬çš„mapè¡¨ï¼Œæ‰¾åˆ°ç›¸åº”çš„å·¦ç«¯ç‚¹çš„ä¸ªæ•°ã€‚
    
    åŒæ—¶æˆ‘ä»¬æ ¹æ® % k ä¹‹åçš„æ•°æ˜¯å°äºkçš„ï¼Œé‚£ä¹Ÿå°±æ˜¯è¯´:r - l + 1 < k
    é‚£è½¬æ¢åˆ°çº¿æ®µä¸Šå°±æ˜¯çº¿æ®µé•¿åº¦éœ€è¦å°äºç­‰äºk-1,åŒæ—¶å› ä¸ºå‰ç¼€å’Œåˆ©ç”¨çš„æ˜¯l-1ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥å­˜ä¸‹çš„æ•°æ˜¯[r - k + 1,r - 1],
    å°±æ˜¯ä¸€æ—¦å½“i >= kæ—¶ï¼Œæˆ‘ä»¬å°±è¦æ¯ä¸€åˆ é™¤ä¸€ä¸ªæœ€å‰ç«¯çš„æ•°ï¼Œä¿è¯å°ºå–æœåˆ°å¯ä»¥æŸ¥è¯¢çš„ä¸ªæ•°ã€‚
   
ACcode:
```C++
#include <bits/stdc++.h>

using namespace std;
using i64 = long long;
const int maxn = 2e5 + 10;

unordered_map<int,int>dp;
int sum[maxn];
int vis[maxn];
int main()
{
#ifndef ONLINE_JUDGE
freopen("in.txt","r",stdin);
freopen("out.txt","w",stdout);
#endif
    ios::sync_with_stdio(false);cin.tie(nullptr);

    int n,k;
    cin >> n >> k;
    dp[0] = 1;
    sum[0] = 0;
    i64 ans = 0;
    for(int  i = 1 ; i <= n ;i++){
        if(i - k >= 0){
            dp[((sum[i-k] - (i - k)) % k + k) % k]--;
        }
        int x;
        cin >> x;
        sum[i] = (sum[i-1] + x) % k;
        ans += 1ll * dp[((sum[i] - i) % k + k) % k];
        dp[((sum[i] - i) % k + k) % k]++;
    }
    cout << ans << endl;

    return 0;
}
```
```diff
!     ğŸ˜²2022-03-06
```
