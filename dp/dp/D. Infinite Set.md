#  ğŸš¼[D. Infinite Set](https://codeforces.com/contest/1635/problem/D)

  çœŸçš„æ„Ÿå¹è¿™é¢˜è¿˜èƒ½è¿™æ ·å†™~~~
  
  
+    dpé€šé¡¹å…¬å¼çš„æ±‚è§£
  é¦–å…ˆæˆ‘ä»¬å®šä¹‰f(x) = k ,è¡¨ç¤º  2^k <= x <= 2^(k + 1), é‚£ä¹ˆå¯¹äºä¸€ä¸ªxä»–çš„f(x)ä¸€å®šæ˜¯ç¡®å®šçš„
  
  æˆ‘ä»¬å†æ¥è€ƒè™‘ä¸€ä¸‹å˜æ¢çš„å…¬å¼ï¼Œ  
  f(2x + 1) = k + 1(1), f(4x) = k + 2(2)
  
  å¯¹äº4xè¾ƒä¸ºç®€å•ï¼Œ  
                   å› ä¸º  2^k <= x <= 2^(k + 1)  
                   æ‰€ä»¥  2^(k + 2) <= 4x <= 2^(k + 3)  
  
  æ•… f(4x) = x + 2  
  
  å¯¹äº2x + 1  
        å› ä¸º 2^k <= x <= 2^(k + 1)  
        æ‰€ä»¥ 2^(k+1) <= 2x <= 2^(k + 2)      
      
        åˆå› ä¸º2xä¸€å®šæ˜¯ä¸€ä¸ªå¶æ•°ï¼Œ2^(k + 2)ä¹Ÿæ˜¯ä¸€ä¸ªå¶æ•°ï¼Œæ‰€ä»¥2x + 1ä¸€å®šä¸ä¼šè¶…è¿‡2^(k + 2)  
        æ‰€ä»¥ç­‰å¼  2^(k+1) <= 2x + 1 <= 2^(k + 2) ä¹Ÿæ˜¯æˆç«‹çš„  
      
      
 é‚£ä¹ˆæˆ‘ä»¬æ¥è€ƒè™‘f(x) = k  
 å¯¹äºf(x) = kçš„æ•°çš„é›†åˆå¯ä»¥é€šè¿‡ä¸¤ç§æ•°å¾—åˆ°ï¼Œ å³f(x) = k - 1, f(x) = k - 2  
 å³å°†f(x) = k - 1çš„æ•°é€šè¿‡(1)å˜æ¢å¯ä»¥å¾—åˆ°f(x) = k  
   å°†f(x) = k - 2çš„æ•°é€šè¿‡(2)å˜æ¢å¯ä»¥å¾—åˆ°f(x) = k  
   
 è¿™ä¸å°±æ˜¯dpçš„æ€æƒ³å—ï¼Ÿ  
 
 
 æˆ‘ä»¬å®šä¹‰dp[i]è¡¨ç¤ºf(x) = i çš„å…ƒç´ çš„ä¸ªæ•°
 é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å¾—å‡ºé€’æ¨å…¬å¼ dp[i] = dp[i - 1] + dp[i - 2]
 
 åˆå› ä¸ºæˆ‘ä»¬éœ€è¦æ±‚å‡ºå°äº x^pçš„å…ƒç´ ,é‚£æˆ‘ä»¬åªéœ€ç»Ÿè®¡åˆ° p - 1 å°±å¯ä»¥äº†
 

+    é‡å¤å…ƒç´ çš„å¤„ç†


    é€šè¿‡dp[i] = dp[i] + dp[i - 1] + dp[i - 2]æˆ‘ä»¬å¯ä»¥æ±‚å‡ºdp[i]çš„å€¼,ä½†æ˜¯æˆ‘ä»¬å¹¶ä¸çŸ¥é“åˆšæ±‚å‡ºçš„å€¼ä¸å·²å­˜åœ¨çš„æ˜¯å¦é‡å¤
    äº†.
    
    é‚£æˆ‘ä»¬åªéœ€è¦åˆ¤æ–­ä¸€ä¸‹è¿™ä¸ªå…ƒç´ æ˜¯å¦å¯ä»¥é€šè¿‡ä¹‹å‰çš„æ•°å¾—åˆ°å°±å¯ä»¥äº†.
    
    æˆ‘ä»¬å³ä½¿å°†è¿™ä¸ªæ•°è¿›è¡Œé€†æ“ä½œ,è®°å½•ä¸€ä¸‹ä»–çš„parentæ˜¯å¦å·²ç»å­˜åœ¨äº†,å¦‚æœå­˜åœ¨é‚£å°±è¯´æ˜æˆ‘ä»¬å¯ä»¥é€šè¿‡parenté€šè¿‡è‹¥å¹²æ¬¡å˜æ¢å¾—åˆ°
    ä»–,é‚£ä»–ä¹Ÿå°±ä¸ç”¨è¢«è®°å½•äº†ã€‚è€Œè¿™ä¸ªæ“ä½œæ˜¯O(log(n))çš„ï¼Œå› ä¸ºä»–è‡³å°‘ä¼šè¢«å‡å°‘ä¸€å€ã€‚
    
ACä»£ç 
```C++
#include <bits/stdc++.h>

#define endl "\n"
using namespace std;
using i64 = long long;
const int mod = 1e9 + 7;

set<int>s;
bool ok;
void dfs(int x){
    
    if(x < 3) return;
    int y = -1;
    if(x & 1){
        y = (x - 1) / 2;
    } else if (x % 4 == 0){
        y = x / 4;
    }
    if(s.count(y)){
        ok = true;
        return;
    }
    dfs(y);
}

int main()
{
#ifndef ONLINE_JUDGE
freopen("in.txt","r",stdin);
freopen("out.txt","w",stdout);
#endif
    ios::sync_with_stdio(false);cin.tie(nullptr);

    int n, p;  cin >> n >> p;
    vector<int>a(n + 1),b;
    for(int i = 1; i <= n ; i++)  cin >> a[i], s.insert(a[i]);

    vector<bool>vis(n + 1);
    for(int i = 1; i <= n ; i++){
        ok = false;
        dfs(a[i]);
        vis[i] = ok;
    }
    for(int i = 1; i <= n; i++){
        if(!vis[i]) b.push_back(a[i]);
    }   
    
    vector<i64>dp(p + 1);

    for(auto x : b){
        int k = 32 - __builtin_clz(x) - 1;
        if(k < p) dp[k] = (dp[k] + 1) % mod;
    }
    for(int i = 1 ; i < p ; i++) {
        if(i - 1 >= 0) dp[i] = (dp[i] + dp[i - 1]) % mod;
        if(i - 2 >= 0) dp[i] = (dp[i] + dp[i - 2]) % mod;
    }

    i64 ans = 0;
    for(int i = 0 ; i < p ; i++)  ans = (ans + dp[i]) % mod;
    cout << ans << endl;


    return 0;
}
```
```diff
!    2022-04-04ğŸ³
```
