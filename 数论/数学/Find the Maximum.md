#  [Find the Maximum](https://ac.nowcoder.com/acm/contest/32708/F)


  åšå®ŒKä¹‹åæˆ‘å°±ä¸€ç›´åœ¨æƒ³Fäº†ï¼Œæ¨äº†å¾ˆå¤šä¸œè¥¿ï¼Œå½“æ—¶ä»¥ä¸ºå¯ä»¥åšå‡ºæ¥ï¼Œçœ‹å®Œå¤§ä½¬ä»¬çš„æƒ³æ³•æ‰çŸ¥é“è‡ªå·±
  èƒ½åŠ›è¿˜æ˜¯å¤ªå¼±äº†ï¼Œè¿˜å¾—ç»ƒå‘€ï¼ï¼ï¼
  
  
  é¦–å…ˆæˆ‘ä»¬è¾ƒå®¹æ˜“æ¨å‡ºçš„æ˜¯æˆ‘ä»¬æ¯æ¬¡éƒ½ä¼šé€‰å–å¯¹ç§°è½´å¤„çš„å€¼ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åŒ–ç®€å¼å­å¾—å‡ºï¼š
  
  (âˆ‘bu)Â²/(4 * (|V|)Â²)  
  åœ¨è¿™é‡Œå› ä¸ºæˆ‘ä¸ä¼šå†åŒ–ç®€å¼å­äº†ï¼Œç„¶åå°±ç›´æ¥è®¾äº†ä¸¤ä¸ªçº¿æ®µè€ƒè™‘ä»–ä»¬çš„åˆå¹¶æ˜¯å¦æ›´ä¼˜ï¼Œè¿™ç¡®å®æ˜¯
  è´ªå¿ƒçš„è¾ƒä¸ºæ­£è§„çš„åšæ³•ï¼Œæœ€åæ¨å‡ºæ¥çš„ä¼¼ä¹ä¹Ÿå¯¹ï¼Ÿ
  
  ä½†æ˜¯å› ä¸ºåŒ–ç®€å¾—é—®é¢˜æ˜¯çš„å¯¹äºè¿™ä¸ªè¡¨è¾¾å¼çš„å«ä¹‰å¹¶æ²¡æœ‰ç†è§£æ¸…æ¥šã€‚
                 
  å…¶å®æˆ‘ä»¬å¯ä»¥ä»¤ X ç­‰äºè¿™æ®µè·¯å¾„ä¸Šçš„ç‚¹çš„bçš„æ±‚å’Œçš„å¹³å‡å€¼ã€‚
  é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥è¾ƒä¸ºæ¸…æ¥šçš„æ±‚å‡ºå…¶å®å¼å­çš„å«ä¹‰æ˜¯XÂ²/4
  æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦ä¿è¯è¿™ä¸€æ®µè·¯å¾„çš„Xçš„ç»å¯¹å€¼è¶Šå¤§å³å¯ã€‚
  
  è¿™é‡Œå¯ä»¥å­¦åˆ°çš„æ˜¯ï¼Œå¯¹äºä¸€æ®µç›¸è¿çš„å¹³å‡å€¼æœ€å¤§çš„é›†åˆï¼Œå…¶å€¼ä¸€å®šæ˜¯2ä¸ªæˆ–æ˜¯3ä¸ªã€‚
  
  å¯¹äºa b c d
  æˆ‘ä»¬è€ƒè™‘ä»a å‘ å³çš„æ‰©å±•ï¼Œ
  (1)bèƒ½å¤Ÿè¢«åŠ è¿›æ¥çš„æ¡ä»¶æ˜¯ï¼š b > a
  (2)ç„¶åc èƒ½å¤Ÿè¢«åŠ è¿›æ¥çš„çš„æ¡ä»¶æ˜¯ (a + b + c) / 3 > (a + b) / 2 å³ä¸º c > (a + b) / 2
  (3)c èƒ½å¤Ÿè¢«åŠ è¿›æ¥çš„çš„æ¡ä»¶æ˜¯ (a + b + c + d) / 4 > (a + b + c) / 3 å³ä¸º d > (a + b + c) / 3
  
  æ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥å¾—å‡ºb, c, dçš„å¤§å°ä¸€å®šéƒ½å¤§äºa,é‚£æˆ‘ä»¬å®Œå…¨å¯ä»¥èˆå»aï¼Œè€Œé€‰æ‹©å‰©ä¸‹çš„é›†åˆä¸­çš„æŸä¸ªã€‚
  
  
  é‚£ä¹ˆæˆ‘ä»¬çš„ä»»åŠ¡å°±æ˜¯æ±‚ä¸‹ç›¸è¿çš„ä¸¤ä¸ªï¼Œä¸‰ä¸ªçš„å¹³å‡å€¼çš„ç»å¯¹å€¼å¾—æœ€å¤§å€¼ã€‚
  é‚£ä¹ˆæˆ‘ä»¬åœ¨è¾“å…¥æ—¶å…¶å®å°±å·²ç»éå†è¿‡æ‰€æœ‰çš„ç›¸è¿çš„ä¸¤ä¸ªç‚¹äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ä¸‰ä¸ªç‚¹çš„ï¼Œé‚£æˆ‘ä»¬å°±éå†æ‰€æœ‰çš„ç‚¹ï¼Œ
  å¯¹å…¶æ‰€æœ‰è¿ç‚¹æŒ‰ç…§bå€¼è¿›è¡Œæ’åºï¼Œé‚£æˆ‘ä»¬é€‰æ‹©çš„ç‚¹å°±ä¸€å®šæ˜¯æœ€å¤§çš„ä¸¤ä¸ªæˆ–è€…æ˜¯æœ€å°çš„ä¸¤ä¸ª(è´Ÿæ•°æ—¶)
  
 è¿™é‡Œå‚è€ƒçš„jianglyçš„ä»£ç ï¼Œç é£å¤ªèµäº†,æ—¢ç®€æ´åˆæ˜äº†ï¼ï¼ï¼
 
```C++
#include <bits/stdc++.h>

#define endl "\n"
using namespace std;
using i64 = long long;

vector<int> v[1000010], b(1000010);

bool cmp(int x,int y){
	return b[x] > b[y];
}
int main()
{
	ios::sync_with_stdio(false);cin.tie(0);
	
	int n;  cin >> n;
	for(int i = 1; i <= n ; i++)  cin >> b[i];
	
	double ans = -1e18;
	for(int i = 1 ; i < n ; i++){
		int u, to;  cin >> u >> to;
		v[u].push_back(to);
		v[to].push_back(u);
		ans = max(ans, 1.0 * (b[u] + b[to]) * (b[u] + b[to]) / 16);
	}
	
	for(int i = 1 ; i <= n ;i++){
		sort(v[i].begin(), v[i].end(),cmp);
		
		int m = v[i].size();
		if(m >= 2){
			int x = v[i][0], y = v[i][1];
			ans = max(ans, 1.0 * (b[i] + b[x] + b[y]) * (b[i] + b[x] + b[y]) / 36);
			x = v[i][m - 1], y = v[i][m - 2];
			ans = max(ans, 1.0 * (b[i] + b[x] + b[y]) * (b[i] + b[x] + b[y]) / 36);
		}
	}
	
	cout << fixed <<setprecision(10) << ans << endl;
	
	return 0;
}
```

```diff
!   2022-04-19ğŸ¦‹
```
